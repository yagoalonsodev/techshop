{% extends "base.html" %}

{% block title %}{{ _('btn_edit') }} {{ _('table_username') }} - Admin - TechShop{% endblock %}

{% block content %}
<div class="admin-container">
    <h2>{{ _('btn_edit') }} {{ _('table_username') }}</h2>
    
    <form method="POST" action="{{ url_for('admin_edit_user', user_id=user.id) }}" class="admin-form">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        
        <div class="form-group">
            <label for="username">{{ _('label_username') }}</label>
            <input type="text" 
                   id="username" 
                   name="username" 
                   value="{{ user.username }}"
                   minlength="4"
                   maxlength="20"
                   pattern="[a-zA-Z0-9_]+"
                   required
                   class="form-input">
            <small>{{ _('help_username') }}</small>
        </div>

        <div class="form-group">
            <label for="email">{{ _('label_email') }}</label>
            <input type="email" 
                   id="email" 
                   name="email" 
                   value="{{ user.email }}"
                   pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}"
                   required
                   class="form-input">
            <small>{{ _('help_email') }}</small>
        </div>

        <div class="form-group">
            <label for="address">{{ _('label_address') }}</label>
            <textarea id="address" 
                      name="address" 
                      class="form-textarea"
                      rows="3">{{ user.address or '' }}</textarea>
            <small>{{ _('label_address') }} ({{ _('newsletter_optional') }})</small>
        </div>

        <div class="form-group">
            <label for="role">{{ _('table_role') }}</label>
            <select id="role" name="role" required class="form-input">
                <option value="common" {% if user.role == 'common' %}selected{% endif %}>{{ _('role_common') }}</option>
                <option value="admin" {% if user.role == 'admin' %}selected{% endif %}>{{ _('role_admin') }}</option>
            </select>
            <small>{{ _('table_role') }}: common ({{ _('account_type_user') }}) o admin ({{ _('admin') }})</small>
        </div>

        <div class="form-group">
            <label for="account_type">{{ _('label_account_type') }}</label>
            <select id="account_type" name="account_type" disabled class="form-input" style="background-color: #f5f5f5; cursor: not-allowed;">
                <option value="user" {% if user.account_type == 'user' %}selected{% endif %}>{{ _('account_type_user') }}</option>
                <option value="company" {% if user.account_type == 'company' %}selected{% endif %}>{{ _('account_type_company') }}</option>
            </select>
            <input type="hidden" name="account_type" value="{{ user.account_type }}">
            <small>{{ _('table_account_type') }} - <strong>{{ _('warning') }}: {{ _('validation_required') }}</strong></small>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-success btn-large">
                {{ _('btn_update') }} {{ _('table_username') }}
            </button>
            <a href="{{ url_for('admin_users') }}" class="btn btn-secondary">
                {{ _('btn_cancel') }}
            </a>
        </div>
    </form>
</div>
{% endblock %}

